"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = callLLM;
const constants_1 = require("./constants");
const token_js_1 = require("token.js");
const client_secrets_manager_1 = require("@aws-sdk/client-secrets-manager");
const simpleCache_1 = require("./simpleCache");
const calculateCost_1 = require("./calculateCost");
const SECRET_NAME = 'llm-provider-api-keys';
const CACHE_USAGE_OBJECT = {
    prompt_tokens: 0,
    completion_tokens: 0,
    total_tokens: 0,
};
let cachedApiKeys = null;
async function loadApiKeys() {
    if (cachedApiKeys)
        return cachedApiKeys;
    const secretsManager = new client_secrets_manager_1.SecretsManagerClient();
    const command = new client_secrets_manager_1.GetSecretValueCommand({ SecretId: SECRET_NAME });
    const response = await secretsManager.send(command);
    if (response && response.SecretString) {
        cachedApiKeys = JSON.parse(response.SecretString);
    }
    return;
}
async function callLLM({ history, prompt, provider, model, log, userId }) {
    try {
        const simpleCacheResponse = await (0, simpleCache_1.checkSimpleCache)(prompt, userId, provider, model);
        if (simpleCacheResponse) {
            return {
                text: JSON.stringify(simpleCacheResponse) || '',
                usage: CACHE_USAGE_OBJECT,
                provider: provider,
                model: model,
                log: log.getLog(),
                simpleCacheHit: true,
            };
        }
        ;
        // const requestEmbedding = await getEmbedding(prompt);
        // const semanticCacheResponse =
        //   await checkSemanticCache(requestEmbedding, userId, provider, model);
        // if (semanticCacheResponse) {
        //   return {
        //     text: semanticCacheResponse || '',
        //     usage: CACHE_USAGE_OBJECT,
        //     provider: provider,
        //     model: model,
        //     log: log.getLog(),
        //     semanticCacheHit: true
        //   }
        // };
        await loadApiKeys();
        if (cachedApiKeys) {
            for (const [key, value] of Object.entries(cachedApiKeys)) {
                process.env[key] = value;
            }
        }
        const tokenjs = new token_js_1.TokenJS();
        const response = await tokenjs.chat.completions.create({
            provider: provider,
            model: model,
            messages: [
                { role: 'system', content: process.env.SYSTEM_PROMPT || constants_1.SYSTEM_PROMPT },
                ...history,
                {
                    role: 'user',
                    content: prompt,
                }
            ],
            temperature: 0.7,
            max_tokens: 500
        });
        const responseText = response.choices?.[0]?.message?.content || '';
        (0, simpleCache_1.addToSimpleCache)(prompt, responseText, userId, provider, model);
        // addToSemanticCache(
        //   requestEmbedding,
        //   prompt,
        //   responseText,
        //   userId,
        //   provider,
        //   model
        // );
        let cost;
        if (response.usage?.prompt_tokens && response.usage.completion_tokens) {
            cost = (0, calculateCost_1.calculateCost)(provider, model, response.usage.prompt_tokens, response.usage.completion_tokens);
        }
        console.log('cost: ', cost);
        return {
            text: responseText,
            usage: response.usage,
            provider: provider,
            model: model,
            log: log.getLog()
        };
    }
    catch (error) {
        console.error(`Error in ${provider} call:`, error);
        throw error;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsbExMTS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xhbWJkYS91dGlsL2NhbGxMTE0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFzQ0EsMEJBc0dDO0FBNUlELDJDQUE0QztBQUM1Qyx1Q0FBbUM7QUFHbkMsNEVBQThGO0FBRzlGLCtDQUFtRTtBQU1uRSxtREFBZ0Q7QUFFaEQsTUFBTSxXQUFXLEdBQUcsdUJBQXVCLENBQUM7QUFDNUMsTUFBTSxrQkFBa0IsR0FBRztJQUN6QixhQUFhLEVBQUUsQ0FBQztJQUNoQixpQkFBaUIsRUFBRSxDQUFDO0lBQ3BCLFlBQVksRUFBRSxDQUFDO0NBQ2hCLENBQUM7QUFFRixJQUFJLGFBQWEsR0FBa0MsSUFBSSxDQUFDO0FBRXhELEtBQUssVUFBVSxXQUFXO0lBQ3RCLElBQUksYUFBYTtRQUFFLE9BQU8sYUFBYSxDQUFDO0lBRXhDLE1BQU0sY0FBYyxHQUFHLElBQUksNkNBQW9CLEVBQUUsQ0FBQztJQUNsRCxNQUFNLE9BQU8sR0FBRyxJQUFJLDhDQUFxQixDQUFDLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDckUsTUFBTSxRQUFRLEdBQUcsTUFBTSxjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRXBELElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELE9BQU87QUFDWCxDQUFDO0FBRWMsS0FBSyxVQUFVLE9BQU8sQ0FBQyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFlO0lBV2hHLElBQUksQ0FBQztRQUNILE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxJQUFBLDhCQUFnQixFQUNoRCxNQUFNLEVBQ04sTUFBTSxF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QUFLLENBQUMsQ0FBQztRQUNuRCxNQUFNLEtBQUssQ0FBQztJQUNoQixDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNZU1RFTV9QUk9NUFQgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUb2tlbkpTIH0gZnJvbSAndG9rZW4uanMnO1xuaW1wb3J0IHsgQ2FsbExMTUFyZ3MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgQ29tcGxldGlvblJlc3BvbnNlIH0gZnJvbSAndG9rZW4uanMnO1xuaW1wb3J0IHsgU2VjcmV0c01hbmFnZXJDbGllbnQsIEdldFNlY3JldFZhbHVlQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc2VjcmV0cy1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBSb3V0aW5nTG9nIGFzIFJvdXRpbmdMb2dUeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBTdXBwb3J0ZWRMTE1zLCBNb2RlbEZvclByb3ZpZGVyIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhZGRUb1NpbXBsZUNhY2hlLCBjaGVja1NpbXBsZUNhY2hlIH0gZnJvbSAnLi9zaW1wbGVDYWNoZSc7XG5pbXBvcnQge1xuICBhZGRUb1NlbWFudGljQ2FjaGUsXG4gIGNoZWNrU2VtYW50aWNDYWNoZSxcbiAgZ2V0RW1iZWRkaW5nLFxufSBmcm9tICcuL3NlbWFudGljQ2FjaGUnO1xuaW1wb3J0IHsgY2FsY3VsYXRlQ29zdCB9IGZyb20gJy4vY2FsY3VsYXRlQ29zdCc7XG5cbmNvbnN0IFNFQ1JFVF9OQU1FID0gJ2xsbS1wcm92aWRlci1hcGkta2V5cyc7XG5jb25zdCBDQUNIRV9VU0FHRV9PQkpFQ1QgPSB7XG4gIHByb21wdF90b2tlbnM6IDAsXG4gIGNvbXBsZXRpb25fdG9rZW5zOiAwLFxuICB0b3RhbF90b2tlbnM6IDAsXG59O1xuXG5sZXQgY2FjaGVkQXBpS2V5czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IG51bGwgPSBudWxsO1xuXG5hc3luYyBmdW5jdGlvbiBsb2FkQXBpS2V5cygpIHtcbiAgICBpZiAoY2FjaGVkQXBpS2V5cykgcmV0dXJuIGNhY2hlZEFwaUtleXM7IFxuICBcbiAgICBjb25zdCBzZWNyZXRzTWFuYWdlciA9IG5ldyBTZWNyZXRzTWFuYWdlckNsaWVudCgpO1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgR2V0U2VjcmV0VmFsdWVDb21tYW5kKHsgU2VjcmV0SWQ6IFNFQ1JFVF9OQU1FIH0pO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VjcmV0c01hbmFnZXIuc2VuZChjb21tYW5kKTtcblxuICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5TZWNyZXRTdHJpbmcpIHtcbiAgICAgICAgY2FjaGVkQXBpS2V5cyA9IEpTT04ucGFyc2UocmVzcG9uc2UuU2VjcmV0U3RyaW5nKTtcbiAgICB9XG4gIFxuICAgIHJldHVybjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gY2FsbExMTSh7IGhpc3RvcnksIHByb21wdCwgcHJvdmlkZXIsIG1vZGVsLCBsb2csIHVzZXJJZCB9OiBDYWxsTExNQXJncyk6XG4gICAgUHJvbWlzZTx7IFxuICAgICAgdGV4dDogc3RyaW5nLCBcbiAgICAgIHVzYWdlOiBDb21wbGV0aW9uUmVzcG9uc2VbJ3VzYWdlJ10sIFxuICAgICAgcHJvdmlkZXI6IFN1cHBvcnRlZExMTXMsIFxuICAgICAgbW9kZWw6IE1vZGVsRm9yUHJvdmlkZXI8dHlwZW9mIHByb3ZpZGVyPiwgXG4gICAgICBsb2c6IFJvdXRpbmdMb2dUeXBlLFxuICAgICAgc2ltcGxlQ2FjaGVIaXQ/OiBib29sZWFuLFxuICAgICAgc2VtYW50aWNDYWNoZUhpdD86IGJvb2xlYW5cbiAgICB9PiB7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2ltcGxlQ2FjaGVSZXNwb25zZSA9IGF3YWl0IGNoZWNrU2ltcGxlQ2FjaGUoXG4gICAgICAgIHByb21wdCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgbW9kZWxcbiAgICAgICk7XG4gICAgICBpZiAoc2ltcGxlQ2FjaGVSZXNwb25zZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRleHQ6IEpTT04uc3RyaW5naWZ5KHNpbXBsZUNhY2hlUmVzcG9uc2UpIHx8ICcnLFxuICAgICAgICAgIHVzYWdlOiBDQUNIRV9VU0FHRV9PQkpFQ1QsXG4gICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICBsb2c6IGxvZy5nZXRMb2coKSxcbiAgICAgICAgICBzaW1wbGVDYWNoZUhpdDogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgfTsgXG4gICAgICBcbiAgICAgIC8vIGNvbnN0IHJlcXVlc3RFbWJlZGRpbmcgPSBhd2FpdCBnZXRFbWJlZGRpbmcocHJvbXB0KTtcbiAgICAgIC8vIGNvbnN0IHNlbWFudGljQ2FjaGVSZXNwb25zZSA9XG4gICAgICAvLyAgIGF3YWl0IGNoZWNrU2VtYW50aWNDYWNoZShyZXF1ZXN0RW1iZWRkaW5nLCB1c2VySWQsIHByb3ZpZGVyLCBtb2RlbCk7XG4gICAgICAvLyBpZiAoc2VtYW50aWNDYWNoZVJlc3BvbnNlKSB7XG4gICAgICAvLyAgIHJldHVybiB7XG4gICAgICAvLyAgICAgdGV4dDogc2VtYW50aWNDYWNoZVJlc3BvbnNlIHx8ICcnLFxuICAgICAgLy8gICAgIHVzYWdlOiBDQUNIRV9VU0FHRV9PQkpFQ1QsXG4gICAgICAvLyAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgLy8gICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgIC8vICAgICBsb2c6IGxvZy5nZXRMb2coKSxcbiAgICAgIC8vICAgICBzZW1hbnRpY0NhY2hlSGl0OiB0cnVlXG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH07XG4gICAgICBcbiAgICAgICAgYXdhaXQgbG9hZEFwaUtleXMoKTtcblxuICAgICAgICBpZiAoY2FjaGVkQXBpS2V5cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY2FjaGVkQXBpS2V5cykpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2tlbmpzID0gbmV3IFRva2VuSlMoKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRva2VuanMuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgICAgICAgbW9kZWw6IG1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBwcm9jZXNzLmVudi5TWVNURU1fUFJPTVBUIHx8IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiA1MDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gcmVzcG9uc2UuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgIGFkZFRvU2ltcGxlQ2FjaGUocHJvbXB0LCByZXNwb25zZVRleHQsIHVzZXJJZCwgcHJvdmlkZXIsIG1vZGVsKTtcbiAgICAgICAgLy8gYWRkVG9TZW1hbnRpY0NhY2hlKFxuICAgICAgICAvLyAgIHJlcXVlc3RFbWJlZGRpbmcsXG4gICAgICAgIC8vICAgcHJvbXB0LFxuICAgICAgICAvLyAgIHJlc3BvbnNlVGV4dCxcbiAgICAgICAgLy8gICB1c2VySWQsXG4gICAgICAgIC8vICAgcHJvdmlkZXIsXG4gICAgICAgIC8vICAgbW9kZWxcbiAgICAgICAgLy8gKTtcblxuICAgICAgICBsZXQgY29zdDtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnVzYWdlPy5wcm9tcHRfdG9rZW5zICYmIHJlc3BvbnNlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zKSB7XG4gICAgICAgICAgY29zdCA9IGNhbGN1bGF0ZUNvc3QoXG4gICAgICAgICAgICBwcm92aWRlciwgXG4gICAgICAgICAgICBtb2RlbCwgXG4gICAgICAgICAgICByZXNwb25zZS51c2FnZS5wcm9tcHRfdG9rZW5zLCBcbiAgICAgICAgICAgIHJlc3BvbnNlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygnY29zdDogJywgY29zdCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSxcbiAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAgIGxvZzogbG9nLmdldExvZygpXG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiAke3Byb3ZpZGVyfSBjYWxsOmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufSJdfQ==